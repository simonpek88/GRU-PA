# GRU-PA 站室绩效考核系统操作手册

-
    ![Support Ukraine](https://img.shields.io/badge/support-Ukraine-yellow?labelColor=005bbb&color=ffd500&style=flat.svg)
    ![GRU-PA ver](https://img.shields.io/badge/ver-0.13.1326-blue.svg)
    ![GRU-PA updated](https://img.shields.io/badge/updated-25/08/08%2021:59-orange.svg)
    ![GRU-PA build](https://img.shields.io/badge/build-passing-deepgreen.svg)
    ![GRU-PA top-languages](https://img.shields.io/github/languages/top/simonpek88/GRU-PA.svg)
    ![GRU-PA commits](https://img.shields.io/github/commit-activity/t/simonpek88/GRU-PA.svg)

## 目录

1. [系统概述](#系统概述)
2. [登录系统](#登录系统)
3. [主页功能](#主页功能)
4. [工作量管理](#工作量管理)
5. [人脸识别功能](#人脸识别功能)
6. [系统设置](#系统设置)
7. [数据导出](#数据导出)
8. [管理员专用功能](#管理员专用功能)
9. [附录](#附录)

## 系统概述

GRU-PA (Grass-roots unit Performance Appraisal system) 是一个基于Python开发的Web应用程序，前端采用Streamlit框架，后端使用MySQL数据库。该系统旨在简化站室工作量录入、统计及绩效考核流程。

### 系统特点

- 基于Web的用户界面，易于访问和使用
- 支持多种登录方式（密码登录、人脸识别登录）
- 工作量录入与统计分析
- 数据可视化展示
- 支持Excel和Word格式数据导出

### 系统要求

#### 硬件要求

- 支持人脸识别功能需要配备摄像头设备
- 建议使用现代浏览器访问系统（Chrome、Firefox、Edge等）

#### 软件环境

- Python 3.9 - 3.12.6
- MySQL 8.4.5
- Dlib 20.0.0（人脸识别功能需要）
- 操作系统：Windows/Linux/macOS

## 登录系统

### 登录方式

GRU-PA系统支持两种登录方式：

1. **密码登录**：选择用户后输入密码登录
2. **人脸识别登录**：通过摄像头进行人脸识别登录（需要预先录入人脸信息）

### 登录步骤

1. 打开浏览器，访问系统地址（默认：<http://localhost:8510）>
2. 在登录界面中，首先选择所属站点
3. 从下拉列表中选择您的用户名(密码用户名登录)
4. 选择登录方式：
   - 密码登录：输入您的密码（初始密码为1234）
   - 人脸识别登录：点击人脸识别选项，系统将启动摄像头进行人脸识别
5. 点击"登录"按钮

### 登录注意事项

- 首次登录请使用初始密码1234，登录后建议立即修改密码
- 人脸识别功能需要预先录入人脸数据
- 如果人脸识别失败，系统将提示使用密码登录

## 主页功能

登录成功后，系统将跳转到主页。主页包含以下功能模块：

### 天气信息展示

主页顶部显示当前位置的实时天气信息，包括：

- 当前温度
- 天气状况
- 湿度
- 风力等级
- 日出日落时间

### 车辆限行信息

如果系统启用了车辆限行功能，将在公告页显示当日及第二天限行信息。

### 系统公告

系统管理员发布的公告将在此处显示。

### 个人工作量统计

主页以图表形式展示个人近期工作量统计信息。

## 工作量管理

工作量管理是系统的核心功能，包括工作量录入、查询和统计三个子模块。

### 工作量录入

#### 功能说明

工作量录入模块用于记录日常工作内容和对应的分值。

#### 操作步骤

1. 在左侧导航栏点击"工作量批量录入"
2. 选择工作日期（默认为当前日期的前一天）
3. 在"工作内容"已按照组别自动显示, 可以在搜索框中进行工作内容查询
4. 在"工作内容"中选择需要录入的工作内容
5. 在"分值"已按固定列表载入
6. 按照用户工作类型已经把默认工作自动勾选
7. 点击"提交"按钮批量提交工作量

#### 手动录入

1. 点击"手工录入"选项卡
2. 按照格式输入多条工作记录
3. 点击"提交"按钮

#### 注意事项

- 工作内容不能为空
- 分值必须为数字
- 可以随时修改未审核的记录

### 工作量统计

工作量统计模块以图表形式展示工作量分布情况。

1. 在左侧导航栏点击"工作量统计"
2. 设置统计时间范围
3. 系统将自动生成统计图表

#### 图表类型

- 柱状图：显示每日工作量分布
- 折线图：显示工作量趋势变化
- 饼图：显示各类工作占比
- 仪表盘：显示当前用户工作占比

总计九种图表类型

## 人脸识别功能

人脸识别功能提供了一种便捷的登录方式。

### 人脸数据录入

1. 在左侧导航栏点击"人脸识别"
2. 点击"更新人脸数据"按钮
3. 系统将启动摄像头
4. 将面部对准摄像头，保持适当距离
5. 系统将自动捕获并保存人脸数据

### 参数设置

可以调整人脸识别的容错率：

1. 在人脸识别界面找到"人脸识别容错率"滑块
2. 调整滑块位置改变容错率（数值越高容错性越强）
3. 点击"保存设置"按钮

### 使用注意事项

- 录入人脸数据时请确保光线充足
- 建议正面录入，避免侧脸或遮挡
- 定期更新人脸数据以提高识别准确率

## 系统设置

### 个人设置

#### 修改密码

1. 在左侧导航栏点击"系统设置"
2. 选择"个人设置"选项卡
3. 输入当前密码和新密码
4. 点击"修改密码"按钮

#### 设置默认值

可以设置常用的工作内容和分值作为默认值：

1. 在"默认值设置"区域输入常用工作内容
2. 设置对应分值
3. 点击"保存默认值"按钮

### 系统参数配置

管理员用户可以配置系统参数：

- 共享分值最大查询天数限制
- 最大减分项分值
- 图表字体设置
- 人脸识别最小相似度
- 其他系统级设置

## 数据导出

### Excel导出

1. 在工作量查询或统计界面点击"导出到Excel"按钮
2. 系统将生成包含两个工作表的Excel文件：
   - 统计表：包含详细数据
   - 简报表：包含汇总信息
3. 浏览器将自动下载生成的Excel文件

#### 文件格式

导出的Excel文件包含以下格式设置：

- 统一的字体和字号
- 表格边框样式
- 合理的列宽设置
- 数据对齐方式

### Word导出

1. 在工作量查询或统计界面点击"导出到Word"按钮
2. 系统将生成格式化的Word文档
3. 浏览器将自动下载生成的Word文件

#### 文档格式

导出的Word文档包含以下格式：

- 标题样式
- 表格格式
- 页眉页脚信息

## 管理员专用功能

以下功能仅对具有管理员权限的用户开放：

### 用户管理

管理员可以管理站内所有用户的信息：

- 查看所有用户的工作量记录
- 修改所有用户工作量和分值
- 核定工作量
- 修改系统设置

### 数据库操作

管理员可以执行关键的数据库维护操作：

- 重置PA-Number
- 重置工作组别
- 更新ID初始值
- 更新PA-Share
- 更新固定分值
- 组别名称修改
- 分组内容调整
- 工作内容修改
- 数据库备份

### 系统公告管理

管理员可以发布和管理系统公告：

- 添加新公告
- 修改现有公告
- 删除过期公告

## 附录

### 常见问题解答

#### 1. 忘记密码怎么办？

请联系系统管理员重置密码。

#### 2. 人脸识别不成功怎么办？

- 检查摄像头是否正常工作
- 确保光线充足
- 正面对准摄像头
- 如多次失败，请使用密码登录

#### 3. 数据查询无结果怎么办？

- 检查查询时间范围是否正确
- 确认关键词拼写是否正确
- 尝试扩大查询范围

### 技术支持

如遇到无法解决的问题，请联系系统管理员或查看项目文档获取更多帮助。

### 系统维护

#### 数据备份

系统提供自动备份功能，备份文件存储在MySQL_Backup目录中。

#### 系统更新

定期检查项目更新，通过git pull命令获取最新版本代码。
